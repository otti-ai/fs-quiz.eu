<?php
include('datenbank.php');
require('times.php');
$now = new DateTime('now');
$questions = array('You wanted to use a CAN bus (CAN 2.0A) to transmit the original Schokolade! - Spongebob Squarepants feat. 9MK2 Remix from YouTube (<a target="_blank" href="https://www.youtube.com/watch?v=WuQOfiD7gNg">link to YouTube</a>). Your CAN bus has a data rate of 500 kbit/s. The song is available at a constant quality of 128 kbit/s. Specify how many frames you need in total to be able to transmit the complete song via the CAN bus and how long this will take.<br>Assume the best case and round the time to seconds.<br>Answer format: count, time<br>Example: 1234, 12','A wedge of weight mg with the opening angle a is loaded as sketched by a vertical force P on the upper side. All contacts are frictionless and the following relationship applies between the horizontal and vertical components of the virtual displacement of the wedge (see dotted lines):<br><img src="https://img.fs-quiz.eu/testquiz/adafwfr3fe33r3fa.jpg"><br>How large must the horizontal force F be to keep the wedge in balance?<br><img src="https://img.fs-quiz.eu/testquiz/wadfdaf3safafa2.jpg">','You want to break through the separation of always the same music at the events on the camping site and are therefore planning to take an organ with you. As the purchase of an organ is beyond your budget and you still have old exhaust pipes available anyway, you decide to build them yourself.<br>Since you want to build a deeper sounding organ, you close one side of each organ pipe.<br>Calculate the length at which you have to cut off the exhaust pipe for a note with a frequency of 880 Hz at the first overtone.<br>c = 343 m/s<br><br>Round to four decimal places.<br>Answer example: 1.2345','The FSG Alpaca Fred an the FSA Cats Werner, Snowball, Rex, Purrlovia, Kat, Samantha are invited to an aftershow party in a bar on the last day of FSA 2024.<br>You are the party planner and designated to assign places and party hats for the 7 participants given these rules:<br>Order from left to right. Left is the the closest spot to the beer keg while right is right next to the window.<br>Werner and Rex are brothers. They want everybody to know it by wearing the same colored party hat. No one else should have their color.<br>Rex is Purrlovias father. They don\'t like to sit next to each other.<br>On Wednesdays it\'s Bean Burrito Day. Because of that Kat prefers to stay at least 2 seats away from Fred on Wednesdays and Thursdays.<br>Fred has a crush on Samantha but is too shy to sit next to her.<br>Samantha refuses to sit next to Kat, unless its Tuesday.<br>When its full moon then Werner wants to sit right next to the window, otherwise he prefers sitting 3 or less seats away from the beer keg.<br>Purrlovia refuses to war the color red.<br>If its Friday Fred refuses to wear green.<br><br>Which of the following seat and party hat orders are feasible:','Which Statement about the EDR is true?','For All TS wiring that runs outside of TS enclosures, which of the following is not true?','Which of the following is incorrect for the firewall?','Calculate the current I₃ in the DC network using the superposition principle.<br><img src="https://img.fs-quiz.eu/testquiz/sefsgsdgsdg.jpg"><br>Round the solution to one decimal place.','At your university there is a district heating network which is operated by a gas turbine. As an extension to your workshop is imminent, you want to know whether the output of the gas turbine is sufficient. How it works: In the gas turbine, air is compressed adiabatically and reversibly (1 → 2), then heated isobarically (2 → 3) and expanded adiabatically and reversibly (3 → 4). In the subsequent heat exchanger, isobaric cooling of the air from T4 to T5 causes a water mass flow of boiling liquid (6) to evaporate isobarically just completely (7). The flow diagram is shown in the following figure as well as further details.<br><img src="https://img.fs-quiz.eu/testquiz/sfdfcvsdgfsedfs.jpg"><br>Assumptions:<br>- Air can be regarded as an ideal gas.<br>- Water is a real substance.<br>- It is a stationary flow process.<br>- All components are adiabatic to the outside.<br>- Differences in kinetic and potential energies can be neglected.<br>What is the efficiency of the gas turbine in percent (total of the components compressor, heat supply and expander)?<br><br>Round to two decimal places. Example: 12.34','Which statements are true?');
$answers = array('<input type="text" class="form-control" id="answer1" placeholder="Enter answer" disabled>','<div class="text-start"><div class="form-check"><input value="A" class="form-check-input" type="radio" name="answer2" id="answer2_1" disabled><label class="form-check-label" for="answer2_1">A</label></div><div class="form-check"><input value="B" class="form-check-input" type="radio" name="answer2" id="answer2_2" disabled><label class="form-check-label" for="answer2_2">B</label></div><div class="form-check"><input value="C" class="form-check-input" type="radio" name="answer2" id="answer2_3" disabled><label class="form-check-label" for="answer2_3">C</label></div><div class="form-check"><input value="D" class="form-check-input" type="radio" name="answer2" id="answer2_4" disabled><label class="form-check-label" for="answer2_4">D</label></div></div>','<input type="text" class="form-control" id="answer3" placeholder="Enter answer" disabled>','<div class="text-start"><div class="form-check"><input name="answer4" class="form-check-input" type="checkbox" value="A" id="answer4_1" disabled><label class="form-check-label" for="answer4_1">A: Snowball (purple) - Rex (yellow) - Kat (orange) - Purrlovia (red) - Samantha (orange) - Fred (lime) - Werner (yellow)</label></div><div class="form-check"><input name="answer4" class="form-check-input" type="checkbox" value="B" id="answer4_2" disabled><label class="form-check-label" for="answer4_2">B: Fred (green) - Werner (red) - Samantha (green) - Snowball (blue) - Rex (red) - Kat (blue) - Purrlovia (blue)</label></div><div class="form-check"><input name="answer4" class="form-check-input" type="checkbox" value="C" id="answer4_2" disabled><label class="form-check-label" for="answer4_2">C: Purrlovia (blue) - Werner (red) - Samantha (red) - Fred (red) - Rex (green) - Snowball (yellow) - Kat (yellow)</label></div><div class="form-check"><input name="answer4" class="form-check-input" type="checkbox" value="D" id="answer4_2" disabled><label class="form-check-label" for="answer4_2">D: Werner (green) - Purrlovia (red) - Kat (blue) - Rex (green) - Fred (green) - Samantha (blue) - Snowball (red)</label></div><div class="form-check"><input name="answer4" class="form-check-input" type="checkbox" value="E" id="answer4_2" disabled><label class="form-check-label" for="answer4_2">E: Kat (blue) - Purrlovia (green) - Werner (yellow) - Samantha (purple) - Rex (yellow) - Fred (green) - Snowball (red)</label></div><div class="form-check"><input name="answer4" class="form-check-input" type="checkbox" value="F" id="answer4_2" disabled><label class="form-check-label" for="answer4_2">F: Rex (red) - Werner (red) - Kat (yellow) - Snowball (blue) - Purrlovia (blue) - Samantha (yellow) - Fred (green)</label></div></div>','<div class="text-start"><div class="form-check"><input value="A" class="form-check-input" type="radio" name="answer5" id="answer5_1" disabled><label class="form-check-label" for="answer5_1">A: Any portions of the EDR that exceed five pages of content and/or three pages of drawings will not be evaluated</label></div><div class="form-check"><input value="B" class="form-check-input" type="radio" name="answer5" id="answer5_2" disabled><label class="form-check-label" for="answer5_2">B: Any portions of the EDR that exceed ten pages of content and/or five pages of drawings will not be evaluated</label></div><div class="form-check"><input value="C" class="form-check-input" type="radio" name="answer5" id="answer5_3" disabled><label class="form-check-label" for="answer5_3">C: Any portions of the EDR that exceed three pages of content and/or five pages of drawings will not be evaluated</label></div><div class="form-check"><input value="D" class="form-check-input" type="radio" name="answer5" id="answer5_4" disabled><label class="form-check-label" for="answer5_4">D: The portion of the drawings in the EDR is unlimited</label></div></div>','<div class="text-start"><div class="form-check"><input value="A" class="form-check-input" type="radio" name="answer6" id="answer6_1" disabled><label class="form-check-label" for="answer6_1">A: Been closed in separate orange non-conductive conduit or use an orange shielded cable. The conduit must be securely anchored to the vehicle, but not to wire, at least at each end.</label></div><div class="form-check"><input value="B" class="form-check-input" type="radio" name="answer6" id="answer6_2" disabled><label class="form-check-label" for="answer6_2">B: Be securely anchored at least at each end so that it can withstand a force of 200N without straining the cable end crimp.</label></div><div class="form-check"><input value="C" class="form-check-input" type="radio" name="answer6" id="answer6_3" disabled><label class="form-check-label" for="answer6_3">C: Be securely anchored at one end so that it can withstand a force of 200N without straining the cable end crimp.</label></div><div class="form-check"><input value="D" class="form-check-input" type="radio" name="answer6" id="answer6_4" disabled><label class="form-check-label" for="answer6_4">D: Body work is not sufficient to meet this enclosure requirement.</label></div></div>','<div class="text-start"><div class="form-check"><input value="A" class="form-check-input" type="radio" name="answer7" id="answer7_1" disabled><label class="form-check-label" for="answer7_1">A: Multiple panels may be used to form the firewall but must overlap atleast 5mm and be sealed at the joints.</label></div><div class="form-check"><input value="B" class="form-check-input" type="radio" name="answer7" id="answer7_2" disabled><label class="form-check-label" for="answer7_2">B: Sealing material may be considered vital to the structural integrity of the firewall.</label></div><div class="form-check"><input value="C" class="form-check-input" type="radio" name="answer7" id="answer7_3" disabled><label class="form-check-label" for="answer7_3">C: Pass-throughs for wiring, cables, etc. are permitted if grommets are used to seal the passthrough.</label></div><div class="form-check"><input value="D" class="form-check-input" type="radio" name="answer7" id="answer7_4" disabled><label class="form-check-label" for="answer7_4">D: Any firewall must seal completely against the passage of fluids, especially at the sides and the floor of the cockpit.</label></div></div>','<input type="text" class="form-control" id="answer8" placeholder="Enter answer" disabled>','<input type="text" class="form-control" id="answer9" placeholder="Enter answer" disabled>','<div class="text-start"><div class="form-check"><input name="answer10" disabled class="form-check-input" type="checkbox" value="A" id="answer10_1"><label class="form-check-label" for="answer10_1" disabled>A: The maximumd driver egress time for a driver to exit the vehicle from a fully seated position is 10 seconds.</label></div><div class="text-start"><div class="form-check"><input name="answer10" disabled class="form-check-input" type="checkbox" value="B" id="answer10_2"><label class="form-check-label" for="answer10_2" disabled>B: The minimum sleeve lenght for sleeved joints is 40mm.</label></div><div class="text-start"><div class="form-check"><input name="answer10" disabled class="form-check-input" type="checkbox" value="C" id="answer10_3"><label class="form-check-label" for="answer10_3" disabled>C: The minimum tread depth for wet tires is 2.1 mm.</label></div><div class="text-start"><div class="form-check"><input name="answer10" disabled class="form-check-input" type="checkbox" value="D" id="answer10_4"><label class="form-check-label" for="answer10_4" disabled>D: The requirements for a power device used to move or remove air from under the vehicle are as following: less than 50 mm x 50 mm x 100 mm.</label></div><div class="text-start"><div class="form-check"><input name="answer10" disabled class="form-check-input" type="checkbox" value="E" id="answer10_5"><label class="form-check-label" for="answer10_5" disabled>E: The catch-cans can be mounted under the driver seat.</label></div><div class="text-start"><div class="form-check"><input name="answer10" disabled class="form-check-input" type="checkbox" value="F" id="answer10_6"><label class="form-check-label" for="answer10_6" disabled>F: A single line LEDs brake light can have the length of 150 mm.</label></div><div class="text-start"><div class="form-check"><input name="answer10" disabled class="form-check-input" type="checkbox" value="G" id="answer10_7"><label class="form-check-label" for="answer10_7" disabled>G: The Brake System Plausibility Device (BSPD) must open the shutdown circuit when hard braking occurs whilst for more than 500 ms.</label></div><div class="text-start"><div class="form-check"><input name="answer10" disabled class="form-check-input" type="checkbox" value="H" id="answer10_8"><label class="form-check-label" for="answer10_8" disabled>H: Your team will receive 5 penalty points, which will be deducted from the teams cost score if the submitted CRD does not match the uploaded version.</label></div><div class="text-start"><div class="form-check"><input name="answer10" disabled class="form-check-input" type="checkbox" value="I" id="answer10_9"><label class="form-check-label" for="answer10_9" disabled>I: In the case of not being able to run the presentation in the assigned time, the BBP is rated with zero points.</label></div><div class="text-start"><div class="form-check"><input name="answer10" disabled class="form-check-input" type="checkbox" value="J" id="answer10_10"><label class="form-check-label" for="answer10_10" disabled>J: The precharging circuit must be charged to at least 90 % of the TS voltage, supplied by the isolating circuit and the entire precharging current must flow through this relay.</label></div>');
$correct = array('4640000, 1030','D','0.2923','B, E','A','C','B','-0.5','50.33','A, F, G, H, I, J');
$solution = array('Song length: 4m50s = 290s<br>Song data size: 290s * 128 kBit/s = 37120000<br>CAN bus frame length: 111 bit<br>Data per frame: 8 bit (best case)<br>Total number of frames: 37120000 bit / 8 bit = 4640000<br>Duration of the transmission: 4640000 * 111 bit / 500 kBit/s = 1030.08 = 1030','','<img src="https://img.fs-quiz.eu/testquiz/efbksebfi.JPG">','','FS Rule 2024: S 3.2.5','FS Rule 2024: EV 4.5.8','FS Rule 2024: T 4.8.2-5','<img src="https://img.fs-quiz.eu/testquiz/adafeadar34aefawf.jpg">','<img src="https://img.fs-quiz.eu/testquiz/adawdwadawdaw.jpg">','');

if(true){//($now > $endTime){
    $time = 0;
    $correctScore = 0;

    $sql = "SELECT COALESCE(ftr.`result`, '-') AS `result`, qid.`question_id`, COALESCE(ftr.`correct`, 0) AS `correct`, COALESCE(ftr.`time`, 0) AS `time` FROM (SELECT 1 AS `question_id` UNION ALL SELECT 2 UNION ALL SELECT 3 UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6 UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9 UNION ALL SELECT 10) AS qid LEFT JOIN `fs-testquiz-result` AS ftr ON ftr.`question_id` = qid.`question_id` AND ftr.`user_id` = ? ORDER BY qid.`question_id` ASC;";
    $statement = $pdo->prepare($sql);
    $statement->execute(array($_GET["token"]));
?>
<?php
    $html = '<div class="accordion" id="resultPanel">';
    foreach ($statement as $row) {
        $id = $row[1];
        $time += $row[3];
        $correctScore += $row[2];
        $html .= '<div class="accordion-item"><h2 class="accordion-header" id="panelTitel'.$id.'"><button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panel'.$id.'" aria-expanded="false" aria-controls="panel'.$id.'">';
        $html .= $id.'/10: ';
        if($row[2]>0){
            $html .= 'passed';
        }else{
            $html .= 'failed';
        }
        $html .= '</button></h2><div id="panel'.$id.'" class="accordion-collapse collapse" aria-labelledby="panelTitel'.$id.'"><div class="accordion-body"><p>';
        $html .= $questions[$id-1].'</p>';
        $html .= $answers[$id-1];
        $html .= '<p style="margin-bottom: 0; margin-left: 2rem;" class="text-danger">You:<br>'.$row[0].'</p>';
        $html .= '<p style="margin-left: 2rem;">Correct:<br>'.$correct[$id-1].'</p>';
        $html .= '<p style="margin-left: 2rem;">Solution:<br>'.$solution[$id-1].'</p></div></div></div>';
    }
    $html .= '</div>';
    echo '<h5>Time: '.sprintf('%02dh %02dm %02ds', ($time/ 3600),($time/ 60 % 60), $time% 60).'<br>Correct answers: '.$correctScore.'</h5>'.$html;
}
?>